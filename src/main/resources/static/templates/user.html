<div class="modal-header">
    <h3 class="modal-title">
        <i class="fa fa-fw fa-user"></i> {{user.name}}
    </h3>
</div>
<div class="modal-body">
    <form class="form-horizontal" ng-if="user">
        <div class="form-group">
            <label class="col-sm-2 control-label">Id</label>
            <div class="col-sm-10">
                <div class="form-control-static" ng-bind="user.id"></div>
            </div>
        </div>
        <div class="form-group" ng-if="user.email">
            <label class="col-sm-2 control-label">Email</label>
            <div class="col-sm-10">
                <div class="form-control-static" ng-bind="user.email"></div>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">Auth</label>
            <div class="col-sm-10">
                <div class="form-control-static">
                    <span class="auth default fa fa-fw fa-key" ng-class="{'active': hasAuth('password')}" tooltip="password"></span>
                    <span class="auth fa fa-fw fa-twitch" ng-class="{'active': hasAuth('twitch.tv')}" tooltip="{{auth['twitch.tv']}}"></span>
                    <span class="auth default fa fa-fw fa-globe" ng-class="{'active': hasAuth('token')}" tooltip="API access token"></span>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="inputName" class="col-sm-2 control-label">
                Name
            </label>
            <div class="col-sm-10">
                <div class="input-group input-group-sm" ng-if="canEdit('name')">
                    <input ng-readonly="!editing('name')" type="text" class="form-control" id="inputName" placeholder="user name" ng-model="input.name">
                        <span class="input-group-btn">
                            <button ng-show="editing('name')" class="btn btn-warning" type="button" ng-click="reset('name')"><span class="fa fa-times fa-fw"></span></button>
                            <button ng-show="editing('name')" class="btn btn-success" type="button" ng-click="saveName()"><span class="fa fa-check fa-fw"></span></button>
                            <button ng-show="!editing('name')" class="btn btn-default" type="button" ng-click="edit('name')"><span class="fa fa-pencil fa-fw"></span></button>
                        </span>
                </div>
                <div class="form-control-static" ng-if="!canEdit('name')">
                    {{user.name}}
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="inputRole" class="col-sm-2 control-label">
                Role
            </label>
            <div class="col-sm-10">
                <div class="input-group input-group-sm" ng-if="canEdit('role')">
                    <select ng-disabled="!editing('role')" class="form-control" id="inputRole" ng-options="role for role in availableRoles" ng-model="input.role"></select>
                        <span class="input-group-btn">
                            <button ng-show="editing('role')" class="btn btn-warning" type="button" ng-click="reset('role')"><span class="fa fa-times fa-fw"></span></button>
                            <button ng-show="editing('role')" class="btn btn-success" type="button" ng-click="saveRole()"><span class="fa fa-check fa-fw"></span></button>
                            <button ng-show="!editing('role')" class="btn btn-default" type="button" ng-click="edit('role')"><span class="fa fa-pencil fa-fw"></span></button>
                        </span>
                </div>
                <div class="form-control-static" ng-if="!canEdit('role')">
                    {{user.role}}
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="inputRole" class="col-sm-2 control-label">
                Color
            </label>
            <div class="col-sm-10">
                <div class="form-control-static">
                    {{user.color}} <span class="fa fa-circle fa-fw" ng-style="{'color': user.color}"></span>
                </div>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <div class="checkbox">
                    <label>
                        <input
                                type="checkbox"
                                ng-disabled="!isUser()"
                                id="inputBanned"
                                ng-model="input.banned"
                                ng-change="saveBanned()"/> Banned
                    </label>
                </div>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <div class="checkbox">
                    <label>
                        <input
                                type="checkbox"
                                id="inputRenameAvailable"
                                ng-model="input.renameAvailable"
                                ng-change="saveRenameAvailable()"/> Can change name
                    </label>
                </div>
            </div>
        </div>
    </form>
    <div class="btn btn-link" ng-click="changePassword()" ng-if="user.role !== 'SUPERADMIN'">
        <i class="fa fa-fw fa-key"></i> change password
    </div>
    <hr/>
    <div class="btn btn-link" ng-click="showActivity()">
        <i class="fa fa-fw fa-bar-chart"></i> Show user activity
    </div>
</div>
<div class="modal-footer">
    <div
            ng-if="SELF_ROLE==='SUPERADMIN'"
            ng-disabled="user && !canEdit('name')"
            ng-click="requestDelete()"
            class="btn btn-danger pull-left"
    >
        Delete user
    </div>
    <div class="btn btn-warning" ng-click="closeModal()">Close</div>
</div>
